spring.application.name=inquiry
# Usa un puerto aleatorio disponible para el servidor web en los tests.
# Esto evita conflictos de "Address already in use" entre ejecuciones.
server.port=0

# --- Configuración de Logging para Tests ---

# Establece el nivel de log general en INFO para ver más detalles.
logging.level.root=INFO

# Opcional: Para ser aún más específico, puedes poner tu paquete en DEBUG.
# Reemplaza "com.kike.training" con el nombre de tu paquete raíz.
logging.level.com.kike.training=DEBUG
# O para ser más específico con el paquete de tu interceptor:
logging.level.com.kike.training.inquiry.config=INFO

# Configuración mínima para seguridad en tests
spring.security.user.name=testuser
spring.security.user.password=testpassword
spring.security.user.roles=USER,ADMIN

# Logging en tests (opcional)
logging.level.org.springframework.jdbc=DEBUG
logging.level.org.springframework.data.jdbc=DEBUG
logging.level.org.springframework.aop.framework.CglibAopProxy=TRACE

# Flyway
spring.sql.init.mode=never
logging.level.org.flywaydb.core=DEBUG
logging.level.org.springframework.jdbc.datasource=DEBUG
spring.main.allow-bean-definition-overriding=true

# =============================================
# Perfil ?test?: tres DataSources H2 en memoria
# =============================================

# Lista de identificadores de DataSources
spring.datasource.names=DE,GB,ES

# ----------------------------------------------------------------
# Configuración común para H2 en memoria:
# - DB_CLOSE_DELAY=-1       ? que no cierre la BD al terminar la última conexión
# - DB_CLOSE_ON_EXIT=FALSE  ? no cierre al salir la JVM (para evitar cierres prematuros)
# ----------------------------------------------------------------

# ================================
# DATASOURCE ?DE? (Alemania)
# ================================
spring.datasource.DE.url=jdbc:h2:mem:DE;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.DE.username=sa
spring.datasource.DE.password=
spring.datasource.DE.driver-class-name=org.h2.Driver

# ================================
# DATASOURCE ?GB? (Reino Unido)
# ================================
spring.datasource.GB.url=jdbc:h2:mem:GB;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.GB.username=sa
spring.datasource.GB.password=
spring.datasource.GB.driver-class-name=org.h2.Driver

# ================================
# DATASOURCE ?ES? (España)
# ================================
spring.datasource.ES.url=jdbc:h2:mem:ES;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.ES.username=sa
spring.datasource.ES.password=
spring.datasource.ES.driver-class-name=org.h2.Driver


